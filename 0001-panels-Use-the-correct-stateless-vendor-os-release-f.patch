From 4b63ca439256db93b8d99250d1171abd3b83c8c6 Mon Sep 17 00:00:00 2001
From: Ikey Doherty <michael.i.doherty@intel.com>
Date: Tue, 2 May 2017 17:16:56 +0100
Subject: [PATCH] panels: Use the correct stateless (vendor) os-release file at
 all times

Signed-off-by: Ikey Doherty <michael.i.doherty@intel.com>
---

rebased for version 3.26.0

Signed-off-by: Simental Magana, Marcos <marcos.simental.magana@intel.com>
---
 panels/info/cc-info-overview-panel.c | 2 +-
 panels/privacy/cc-privacy-panel.c    | 6 +++---
 2 files changed, 4 insertions(+), 4 deletions(-)

diff --git a/panels/info/cc-info-overview-panel.c b/panels/info/cc-info-overview-panel.c
index 3af58be..4957f23 100644
--- a/panels/info/cc-info-overview-panel.c
+++ b/panels/info/cc-info-overview-panel.c
@@ -391,7 +391,7 @@ get_os_info (void)
 
   hashtable = NULL;
 
-  if (g_file_get_contents ("/etc/os-release", &buffer, NULL, NULL))
+  if (g_file_get_contents ("/usr/lib/os-release", &buffer, NULL, NULL))
     {
       gchar **lines;
       gint i;
diff --git a/panels/privacy/cc-privacy-panel.c b/panels/privacy/cc-privacy-panel.c
index ab367b6..9377c26 100644
--- a/panels/privacy/cc-privacy-panel.c
+++ b/panels/privacy/cc-privacy-panel.c
@@ -85,7 +85,7 @@ get_os_name (void)
 
   name = NULL;
 
-  if (g_file_get_contents ("/etc/os-release", &buffer, NULL, NULL))
+  if (g_file_get_contents ("/usr/lib/os-release", &buffer, NULL, NULL))
     {
        char *start, *end;
 
@@ -126,7 +126,7 @@ get_privacy_policy_url (void)
 
   url = NULL;
 
-  if (g_file_get_contents ("/etc/os-release", &buffer, NULL, NULL))
+  if (g_file_get_contents ("/usr/lib/os-release", &buffer, NULL, NULL))
     {
        char *start, *end;
 
@@ -1221,7 +1221,7 @@ add_abrt (CcPrivacyPanel *self)
   url = get_privacy_policy_url ();
   if (!url)
     {
-      g_debug ("Not watching for ABRT appearing, /etc/os-release lacks a privacy policy URL");
+      g_debug ("Not watching for ABRT appearing, /usr/lib/os-release lacks a privacy policy URL");
       return;
     }
   msg = g_strdup_printf ("<a href=\"%s\">%s</a>", url, _("Privacy Policy"));
-- 
2.14.1

